(function(){function h(b,c,e){var a=b.author.length;if(!b.author.length&&0>=b.author.length)c=" ";else{for(var d=0;d<a&&3>d;d++)0==d?c=e+b.author[d].name:d<a&&3>d&&(c=c+",\x3cbr/\x3e"+b.author[d].name);3<a&&(c+=",...")}return c}def.ArticleCard=function(){var b=this;this.init=function(){this.name="ArticleCard";this.project="perspectives";if(this.elm=document.querySelector(".featured-card-section"))this.scrollMenu=this.elm.querySelector(".scroll-menu"),this.scrollHeader=this.scrollMenu.querySelector(".scroll-header"),
this.mainMenu=this.elm.querySelector(".menu-items"),this.mainMenuItems=this.mainMenu.querySelectorAll("h3"),this.cardOuter=this.elm.querySelector(".multicard-section-outer"),this.mainMenuSelector=this.mainMenu.querySelector(".main-menu-selector"),this.loadMoreCards=this.elm.querySelector("#load-more-latest"),this.limit=document.querySelector("#viewAllLimit"),this.sortBy=document.querySelector("#sortBy"),this.orderBy=document.querySelector("#orderBy"),this.searchByTag=document.querySelector("#searchByTag"),
this.filterBy=document.querySelector("#filterBy"),this.edition=document.querySelector("#edition"),this.searchpath=document.querySelector("#path"),this.reqPostObjOffset=0,this.addEvents(),this.getCards(!1,!0)};this.addEvents=function(){var c=this.mainMenuItems.length;this.scrollHeader&&this.scrollHeader.addEventListener("click",function(){b.scrollMenu.classList.toggle("open")},!1);for(var e=0;e<c;++e){var a=this.mainMenuItems[e];a.addEventListener("click",function(a){b.mainMenu.querySelector(".selected").classList.remove("selected");
this.classList.add("selected");b.mainMenuSelector.style.transform="translate(0, "+this.offsetTop+"px)";b.scrollMenu.classList.remove("open");b.getCards(!1,!0)},!1);a.addEventListener("keydown",function(a){32!=a.which&&13!=a.which||this.click()},!1)}this.loadMoreCards&&(this.loadMoreCards.addEventListener("click",function(a){b.getCards(!0,!1);a.preventDefault()},!1),this.loadMoreCards.addEventListener("keydown",function(a){32!=a.which&&13!=a.which||this.click()},!1))};this.getCards=function(c,e){var a=
this,d=document.querySelector(".progress");null==a.limit||null!=a.limit.value&&""!=a.limit.value||(a.limit.value="3");if(null==a.sortBy||null==a.sortBy.value)a.sortBy.value="publishedDate";if(null==a.orderBy||null==a.orderBy.value)a.orderBy.value="desc";if(null==a.searchpath||null==a.searchpath.value)a.searchpath.value="";if(null==a.filterBy||null==a.filterBy.value)a.filterBy.value="edition";var b="projectname\x3d"+a.project+"\x26displaytype\x3dlist\x26category\x3d\x26type\x3dpage\x26offset\x3d"+
a.reqPostObjOffset+"\x26limit\x3d"+a.limit.value+"\x26filterby\x3d"+a.filterBy.value+"\x26filterbytype\x3dproperty\x26filtervalue\x3d"+a.edition.value+"\x26sortby\x3d"+a.sortBy.value+"\x26orderby\x3d"+a.orderBy.value+"\x26path\x3d"+a.searchpath.value+"\x26searchByTag\x3d"+a.searchByTag.value;d&&d.classList.contains("hide")&&!e&&d.classList.remove("hide");fetch("/services/tcs/perspectives/fetchdata?"+b,{method:"GET",credentials:"include"}).then(function(e){d&&!d.classList.contains("hide")&&d.classList.add("hide");
200===e.status&&e.json().then(function(e){(e.searchResult.totalMatch<=a.limit.value||a.reqPostObjOffset+a.limit.value>e.searchResult.totalMatch)&&a.loadMoreCards&&a.loadMoreCards.classList.add("hide");e.searchResult.totalMatch>a.limit.value&&(a.reqPostObjOffset+=a.limit.value);a.setCards(e,c)})}).catch(function(a){})};this.setCards=function(c,e){c=c.searchResult.cards;var a=c.length,d;e||(this.cardOuter.innerHTML="");e=this.elm.getAttribute("data-card-style-attr");for(var b=0;b<a;++b){var g="";var f=
c[b].assetShareLink;-1==window.location.href.toString().indexOf("/content/tcs/perspectives-en")&&(f=f.replace("/content/tcs/perspectives-en",""),f=f.replace(".html",""));f='\x3cdiv class\x3d"col s12 m12 l4"\x3e\x3cdiv class\x3d"card-outerWrapper-content" data-component-type\x3d"featured-insights-div"\x3e\x3ca href\x3d"'+f+'" class\x3d"targetLink access-class" rel\x3d"noopener" data-component-type\x3d"featured-insights-anchor" tabindex \x3d "0"\x3e\x3cdiv class\x3d"card box-shadow hover-effect cursor-pointer card-article" style\x3d" '+
e+' " \x3e\x3cdiv class\x3d"card-image re-pa" alt\x3d"Featured Cards Image"\x3e';c[b].assetLink&&(f+='\x3cpicture\x3e\x3csource class\x3d"cardSource" srcset\x3d"'+c[b].assetLink+'"\x3e\x3cimg class\x3d"image" src\x3d"'+c[b].assetLink+'" alt\x3d"Featured Cards Image"\x3e\x3c/picture\x3e');c[b].author&&(d="interview"==c[b].category?h(c[b],d,"Interview with\x3cbr/\x3e "):h(c[b],d,"By "));c[b].title&&(g=c[b].title,59<g.length&&(g=g.substr(0,52)+"..."));f+='\x3c/div\x3e\x3cdiv class\x3d"card-content"\x3e\x3cdiv class\x3d"padd pad-top"\x3e\x3cdiv class\x3d"pa-title"\x3e'+
g+'\x3c/div\x3e\x3cdiv class\x3d"card-author top-margin-min pa-author" title\x3d"'+d+'"\x3e '+d+' \x3c/div\x3e\x3cdiv class\x3d"card-date text-style-52 hide"\x3e'+c[b].publishedDate+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card-img"\x3e\x3cdiv class\x3d"author-image hide"\x3e\x3cpicture\x3e\x3csource class\x3d"authorSource" srcset\x3d""\x3e\x3cimg class\x3d"author-img" src\x3d"" alt\x3d"Featured Cards Image"\x3e\x3c/picture\x3e\x3c/div\x3e\x3cdiv class\x3d"card-author-info center-align"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e';
this.cardOuter.insertAdjacentHTML("beforeend",f)}};this.init()};obj.articleCard=new def.ArticleCard})();
(function(){function h(c){c={cardListContainerWrapper:this.sectionBts,cardListContainer:this.sectionBts.querySelector(".inner-bts-wrapper"),cards:this.sectionBts.querySelectorAll(".bts-block"),navButtonsContainer:this.sectionBts.querySelector(".large-screen"),navButtonsContainerMobile:this.sectionBts.querySelector(".small-screen"),navButtonsMobile:this.sectionBts.querySelector(".small-screen").querySelectorAll(".card-collection-nav-link"),cardViewCount:utils.getCardsCount(),gutterWidth:10,isAutoSlide:!0};
new window.def.FlexPanelSlider(c)}def.Perspective=function(){this.name="Perspective";this.featuredCards=document.querySelector(".featured-cards");this.cardSwipeContainers=document.querySelectorAll(".card-swipe-outer");this.bannerSliderPerspectives=h;this.init()};var b=def.Perspective.prototype;def.Perspective.prototype.constructor=def.Perspective;b.init=function(){this.featuredCards&&new def.Toggle(this.featuredCards);this.sectionBtsCarousel=document.querySelectorAll(".section-bts-carousel");for(var c=
0;c<this.sectionBtsCarousel.length;c++)(this.sectionBts=this.sectionBtsCarousel[c])&&this.bannerSliderPerspectives(this.sectionBts);this.addSliders()};b.addSliders=function(){this.wrapperWidth=0;this.cardSwipeContainers&&(this.cardSwipeContainersLength=this.cardSwipeContainers.length);0<this.cardSwipeContainersLength&&(this.wrapperWidth=document.querySelector(".card-swipe-outer").offsetWidth);if(this.cardSwipeContainersLength&&0<this.cardSwipeContainersLength)for(var c=0;c<this.cardSwipeContainersLength;++c){var b=
this.cardSwipeContainers[c];b={cardListContainerWrapper:b,cardListContainer:b.querySelector(".card-swipe-list"),cards:b.querySelectorAll(".swipe-card-elm"),navButtons:b.querySelectorAll(".navButtons .nav-link"),navArrowButtons:b.querySelectorAll(".cws-arrows"),cardViewCount:utils.getCardViewCount(),gutterWidth:20,viewAllRequired:"",wrapperWidth:this.wrapperWidth};new window.def.SliderPerspectives(b)}};obj.Perspective=new def.Perspective})();